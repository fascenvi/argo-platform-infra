# --------------------------------------------------------
# Tenant definition
# --------------------------------------------------------
name: bu-a
displayName: Business Unit A
description: Payments and Billing domain
owner:
  team: payments-platform
  email: payments-platform@company.com

# Classificação usada para governança e auditoria
criticality: high            # low | medium | high | mission-critical
compliance:
  - pci
  - sox

# --------------------------------------------------------
# Environments habilitados para esse tenant
# (Matrix cruza isso com a lista global de envs)
# --------------------------------------------------------
environments:
  - dev
  - sdx
  - prd

# --------------------------------------------------------
# Repositórios de aplicações permitidos
# (vira spec.sourceRepos do AppProject)
# --------------------------------------------------------
sourceRepos:
  - https://github.com/company/apps-bu-a-*
  - https://github.com/company/libs-shared

# --------------------------------------------------------
# Estratégia de naming de namespaces
# --------------------------------------------------------
namespace:
  pattern: "{{tenant.name}}-{{env}}-{{service}}"
  labels:
    tenant: "{{tenant.name}}"
    business-unit: "bu-a"

# --------------------------------------------------------
# RBAC específico do tenant (OIDC / SSO)
# --------------------------------------------------------
rbac:
  adminGroup: oidc:bu-a-admins
  developerGroup: oidc:bu-a-developers
  readonlyGroup: oidc:bu-a-viewers

# --------------------------------------------------------
# Políticas por environment
# --------------------------------------------------------
policies:

  # -------- DEV --------
  dev:
    autoSync: true
    allowPrune: true
    manualSyncOnly: false

  # -------- SDX --------
  sdx:
    autoSync: true
    allowPrune: true
    manualSyncOnly: false
    syncWindow:
      kind: allow
      schedule: "0 6 * * 1-5"   # horário comercial
      duration: 10h

  # -------- PRD --------
  prd:
    autoSync: false
    allowPrune: false
    manualSyncOnly: true
    approvalRequired: true

    syncWindow:
      kind: deny
      schedule: "* * * * *"
      duration: 24h

    protections:
      preventDeletion: true
      requireChangeTicket: true

# --------------------------------------------------------
# Limites e quotas (governança futura)
# --------------------------------------------------------
limits:
  maxApplications: 50
  maxNamespaces: 20

# --------------------------------------------------------
# Feature flags de plataforma
# --------------------------------------------------------
features:
  enableCanaryDeployments: true
  enableBlueGreen: false
  enablePreviewEnvironments: false

# --------------------------------------------------------
# Metadados livres (não usados diretamente)
# --------------------------------------------------------
metadata:
  costCenter: "CC-042"
  businessOwner: "VP Payments"
  